<div *ngIf="currentShowToastedMessage" class="toast">
  <span>{{ currentUserName }} acaba de elegir una carta</span>
</div>

<div class="poker-table-container">
  
    <div class="table-space">

      <div class="grid-container">

        <div class="card-column">
            <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card-left">
              <div class="center-c-elements">
                <div 
                  class="card__image"
                  [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                  <div *ngIf="currentShowSelectedNumbers" class="card__text">
                    {{ selectedNumbers[1] }}
                  </div>
                </div>
                <div class="card__text">
                  Carlos
                </div>
              </div>          
            </div>
      
            <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card">
              <div class="circular-element">
                DA
              </div>
              <div class="card__text">
                David
              </div>
            </div>
      
            <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card-right">
              <div class="center-c-elements">
                <div 
                  class="card__image"
                  [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                  <div *ngIf="currentShowSelectedNumbers" class="card__text">
                    {{ selectedNumbers[2] }}
                  </div>
                </div>
                <div class="card__text">
                  Nata
                </div>
              </div>          
            </div>
      
        </div>
    
        <div class="card-column">
          <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card">
            <div class="center-c-elements">
              <div 
                class="card__image"
                [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                <div *ngIf="currentShowSelectedNumbers" class="card__text">
                  {{ selectedNumbers[3] }}
                </div>
              </div>
              <div class="card__text">
                Vale
              </div>
            </div>          
          </div>
    
          <div class="card">
            <div class="poker-table">
              <div class="table-felt"></div>
              <div class="outer-border"></div>
              <div class="middle-border"></div>
              <div class="inner-border"></div>
  
              <div class="center-button">

                <button                   
                  (click)="showCardsAndAverage()"
                  *ngIf="currentShowButton" 
                  class="show-cards-button">
                    Revelar cartas
                </button>
  
                <div *ngIf="currentGenerateNumbers">
                  <div class="loader">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="count_text">
                    Contando votos
                  </div>
                </div>
  
                <button 
                  (click)="nuevaVotacion()"
                  *ngIf="currentShowSelectedNumbers" 
                  class="show-cards-button">
                    Nueva votaci√≥n
                </button>
              </div>
  
            </div>
          </div>      
    
          <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card">
            <div class="center-c-elements">
              <div 
                class="card__image"
                [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                <div *ngIf="currentShowSelectedNumbers" class="card__text">
                  {{ selectedNumbers[4] }}
                </div>
              </div>
              <div class="card__text">
                Pedro
              </div>
            </div>          
          </div>
        </div>
        
        <div class="card-column">
            <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card-left">
              <div class="center-c-elements">
                <div 
                  class="card__image"
                  [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                  <div *ngIf="currentShowSelectedNumbers" class="card__text">
                    {{ selectedNumbers[5] }}
                  </div>
                </div>
                <div class="card__text">
                  Oscar
                </div>
              </div>
            </div>
      
            <div class="card">
              <div class="center-c-elements">
                <div 
                  class="card__image"
                  [ngClass]="{'changeCardBackground': currentShowUserCard}"
                >
                  <div *ngIf="currentShowSelectedNumbers" class="card__text">
                    {{ selectedNumbers[0] }}
                  </div>
                </div>
                <div class="card__text">
                    {{ currentUserName }}
                </div>
              </div>
            </div>
      
            <div [ngClass]="{'hidden': currentDontShowPlayerElements}" class="card-right">
              <div class="center-c-elements">
                <div 
                  class="card__image"
                  [ngClass]="{'changeCardBackground': currentChangeCardBackground}">
                  <div *ngIf="currentShowSelectedNumbers" class="card__text">
                    {{ selectedNumbers[6] }}
                  </div>
                </div>
                <div class="card__text">
                  Albert
                </div>
              </div>          
            </div>
        </div>
  
      </div>

    </div>

    <div *ngIf="currentShowSelectedNumbers" class="voting-container">
      <div 
        class="voting-card-column" 
        [style.gridTemplateColumns]="'repeat(' + uniqueNumbersLength + ', 0.4fr)'">

        <div 
          class="voting-card" 
          *ngFor="let number of uniqueNumbers | keyvalue; let i = index">
          <div>

            <div class="voting-card__image">
              <div class="voting-card__text">
                {{ number.key }}
              </div>
            </div>
            <div class="voting-card__text">
              {{ number.value }} Voto
            </div>

          </div>
          
        </div>

        <div class="voting-average">
          <div class="voting-card__text">
            Promedio:
          </div>
          <div class="voting-card__average">
            {{ average | number:'1.0-1' }}
          </div>
        </div>
        
      </div>
    </div>

    <div *ngIf="currentShowPlayerElements" class="player-grid-container">
        <div class="player-text-column">
          Elige una carta
        </div>
        
        <div class="player-card-column">

          <div 
            *ngFor="let cardNumber of selectedCard | keyvalue"
            class="player-card"
            [ngStyle]="{'transform': cardNumber.value ? 'translateY(-5px)' : ''}"
          >
            <div
              onkeypress 
              class="player-card__image" 
              (click)="selectCard(+cardNumber.key)"
              [ngClass]="{'changeCardSelected': cardNumber.value}"
            >
              <div               
                [ngClass]="{'changeCardSelectedColor': cardNumber.value}"
                class="player-card__text">
                  {{ +cardNumber.key }}
              </div>
            </div>
            <div class="player-card__text"></div>
          </div>
    
          <div class="player-card" [ngStyle]="{'transform': selectedCardQuestion ? 'translateY(-5px)' : ''}">
            <div 
              onkeypress
              (click)="selectCard(-10)" 
              class="player-card__image"
              [ngClass]="{'changeCardSelected': selectedCardQuestion}"
            >
              <div 
                [ngClass]="{'changeCardSelectedColor': selectedCardQuestion}" 
                class="player-card__text">
                  ?
              </div>
            </div>
            <div class="player-card__text"></div>
          </div>
    
          <div class="player-card">
            <div class="player-card__image">
              <div class="player-card__text">cafe</div>
            </div>
            <div class="player-card__text"></div>
          </div>
    
        </div>

    </div>

</div>